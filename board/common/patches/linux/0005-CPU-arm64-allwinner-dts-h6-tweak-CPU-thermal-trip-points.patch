Subject: [PATCH] arm64: allwinner: dts: h6: tweak CPU thermal trip points
Date: Thu, 16 Jul 2020 19:28:04 +0200

The default trip points are already a good balance of
performance with heat generation. However, as I am concerned
about the lifespan of my Pine H64, I want to introduce a trip
point at 75ÂºC which applies a bit of passive cooling, to keep
temperatures lower and prevent them from raising so fast, with
a light performance loss.

Signed-off-by: AlexTMjugador <AlexTMjugador@users.noreply.github.com>
---
 arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi | 18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi b/arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi
index 78b1361df..fed16b7b9 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi
+++ b/arch/arm64/boot/dts/allwinner/sun50i-h6.dtsi
@@ -984,7 +984,13 @@ cpu-thermal {
 			thermal-sensors = <&ths 0>;
 
 			trips {
-				cpu_alert: cpu-alert {
+				cpu_warm: cpu-warm {
+					temperature = <75000>;
+					hysteresis = <2000>;
+					type = "passive";
+				};
+
+				cpu_hot: cpu-hot {
 					temperature = <85000>;
 					hysteresis = <2000>;
 					type = "passive";
@@ -999,7 +1005,15 @@ cpu-crit {
 
 			cooling-maps {
 				map0 {
-					trip = <&cpu_alert>;
+					trip = <&cpu_warm>;
+					cooling-device = <&cpu0 1 1>,
+							 <&cpu1 1 1>,
+							 <&cpu2 1 1>,
+							 <&cpu3 1 1>;
+				};
+
+				map1 {
+					trip = <&cpu_hot>;
 					cooling-device = <&cpu0 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
 							 <&cpu1 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
 							 <&cpu2 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
-- 
2.27.0

